<!DOCTYPE html>
<html>

<head>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@600&display=swap" rel="stylesheet">

    <title>It was the Management!</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        body {
            background-color: black;
            font-family: 'IBM Plex Mono', monospace;
            color: #00FF00;
        }

        h1 {
            font-size: 40px;
            font-style: normal;
            font-variant: normal;
            font-weight: 600;
            text-align: center;
        }

        h5 {
            font-size: 20px;
            font-style: normal;
            font-variant: normal;
            font-weight: 600;
            text-align: center;
        }

        .wordwrap-fix {
            -ms-word-break: break-all;
            word-break: break-all;
        }

        img {
            max-width: 400px;
            max-height: 400px;
        }

        @media only screen and (min-width: 769px) {
            h1 {
                font-size: 80px;
                -ms-word-break: unset;
                word-break: unset;
            }

            h5 {
                -ms-word-break: unset;
                word-break: unset;
            }

            .meme {
                padding-left: 20%;
                padding-right: 20%;
            }
        }

        @media only screen and (min-width: 600px) {
            h1 {
                font-size: 60px;
                -ms-word-break: unset;
                word-break: unset;
            }

            h5 {
                -ms-word-break: unset;
                word-break: unset;
            }

            img {
                max-width: 600px;
                max-height: 600px;
            }
        }

        .meme {
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-right: -50%;
            transform: translate(-50%, -50%);
        }

        .footer {
            position: fixed;
            left: 0px;
            bottom: 0px;
            height: 30px;
            width: 100%;
        }

        .header {
            position: fixed;
            left: 0px;
            top: 0px;
            height: 30px;
            width: 100%;
        }

        .hidden {
            display: none;
        }

        a {
            color: inherit;
        }
    </style>


</head>

<body>

    <h5 class="header">
        It was the Management!
    </h5>

    <div class="meme">
        <h1 id="text" class="hidden"></h1>
        <img id="image" src="" alt="" class="hidden">
        <h5 id="subtitle" , class="hidden"></h5>
    </div>

    <h5 class="footer">
        Or was it?
    </h5>

    <script>
        let imageExtensions = ["png", "jpg", "jpeg", "webp", "gif"]
        fetch("/memes.txt")
            .then(function (response) {
                return response.text();
            }).then(function (text) {
                let data = text.split("\n");
                let textString = data[Math.floor((Math.random() * data.length))];
                let imgCheck = textString.split(".")
                imgCheck = imgCheck[imgCheck.length - 1]
                let isImage = false;
                for (let index = 0; index < imageExtensions.length; index++) {
                    const imgExt = imageExtensions[index];
                    if (imgCheck == imgExt) {
                        isImage = true;
                        break;
                    }
                }
                if (isImage) {
                    let imageElement = document.getElementById("image");
                    let subtitle = document.getElementById("subtitle");
                    subtitle.innerHTML = "<a href=" + textString + ">" + textString + "</a>";
                    subtitle.classList.add("wordwrap-fix");
                    subtitle.classList.remove("hidden");
                    imageElement.setAttribute("src", textString);
                    imageElement.classList.remove("hidden");
                } else {
                    let textElement = document.getElementById("text");
                    if (textString.slice(0, 4) == "http") {
                        textElement.innerHTML = "<a href=" + textString + ">" + textString + "</a>";
                        textElement.classList.add("wordwrap-fix");
                    } else {
                        textElement.innerHTML = textString;
                    }
                    textElement.classList.remove("hidden");
                }
            }).catch(function (error) {
                document.getElementById("text").innerHTML = error;
            })
    </script>

</body>

</html>